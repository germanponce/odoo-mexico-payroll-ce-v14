Clave Emisora (payroll_batch_file_company_code) = Clave emisora de Banorte
Secuencia: General - Utilizar subsecuencias por date_range
Nombre de archivo: N%(emisora)s%(consecutivo)s.txt

<?xml version="1.0"?>
<t t-name="l10n_mx_payroll_bank_dispersion.banorte_batch_file">HNE<t t-esc="bank.payroll_batch_file_company_code"/><t t-esc="o.date_payroll.strftime('%Y%m%d')"/>01<t t-esc="str(len(o.slip_ids.filtered(lambda _w: _w.state in ('draft','done') and _w.neto_a_pagar > 0.009999999999 and _w.employee_id.bank_account_id.bank_id.id==bank.id).ids)).zfill(6)"/><t t-esc="str(sum(int(str(_x.neto_a_pagar).find('.')==-1 and str(_x.neto_a_pagar)+'.00' or (len(str(_x.neto_a_pagar)) - (str(_x.neto_a_pagar).find('.') + 1)==1 and str(_x.neto_a_pagar)+'0' or str(_x.neto_a_pagar)).replace('.','')) for _x in o.slip_ids.filtered(lambda _w: _w.state in ('draft','done') and _w.neto_a_pagar > 0.009999999999 and _w.employee_id.bank_account_id.bank_id.id==bank.id))).zfill(15)" /><t t-esc="'0'*6" /><t t-esc="'0'*15" /><t t-esc="'0'*6" /><t t-esc="'0'*15" /><t t-esc="'0'*6" />0<t t-esc="' '*77" /><t t-foreach="o.slip_ids.filtered(lambda _w: _w.state in ('draft','done') and _w.neto_a_pagar > 0.009999999999 and _w.employee_id.bank_account_id.bank_id.id==bank.id)" t-as="nom">
D<t t-esc="nom.date_payroll.strftime('%Y%m%d')" /><t t-esc="len(nom.employee_id.num_empleado) &lt;=10 and ('0'*(10 - len(nom.employee_id.num_empleado))) + nom.employee_id.num_empleado or nomina.employee_id.num_empleado[10:]" /><t t-esc="' '*80" /><t t-esc="'{0:.2f}'.format(nom.neto_a_pagar).replace('.','').zfill(15)" /><t t-esc="bank.bic or '000'" />01<t t-esc="nom.employee_id.bank_account_id and nom.employee_id.bank_account_id.acc_number.zfill(18) or ('0'*18)" />0 <t t-esc="'0'*8" /><t t-esc="' '*18" /></t>
</t>